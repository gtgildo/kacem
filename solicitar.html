<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitar Crédito - KACEM, SA</title>
    <link rel="stylesheet" href="sltr.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <div id="app-light">
            <header class="header">
                <div class="container">
                    <div class="cab">
                        <div class="logo-container">
                            <a href="index.html" class="logo" aria-label="Página inicial da KACEM">
                                <img src="img/kacem0.png" alt="KACEM Logo" class="logo-img">
                            </a>
                            <a href="index.html" class="logo-text">KACEM</a>
                        </div>
                        
                        <button class="mobile-menu-toggle" aria-label="Abrir menu" aria-expanded="false">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                        
                        <nav class="prin-cab" aria-label="Navegação principal">
                            <a href="index.html" class="nav-cab">
                                <i class="fas fa-home" aria-hidden="true"></i>
                                Home
                            </a>
                            <div class="nav-cab" aria-haspopup="true">
                                <a href="produtos.html" class="nav-link">
                                    <i class="fas fa-hand-holding-usd" aria-hidden="true"></i>
                                    Produtos
                                    <span class="dropdown-icon">⌄</span>
                                </a>
                                <div class="submenu">
                                    <a href="KACEM_Investimento.html" class="submenu-item">KACEM Investimento</a>
                                    <a href="KACEM_Negócio.html" class="submenu-item">KACEM Negócio</a>
                                    <a href="KACEM_Protocolo.html" class="submenu-item">KACEM Protocolo</a>
                                    <a href="KACEM_Solidário.html" class="submenu-item">KACEM Solidário</a>
                                    <a href="KACEM_Tesouraria.html" class="submenu-item">KACEM Tesouraria</a>
                                </div>
                            </div>
                            <div class="nav-cab" aria-haspopup="true">
                                <a href="institucional.html" class="nav-link">
                                    <i class="fas fa-building" aria-hidden="true"></i>
                                    Institucional
                                    <span class="dropdown-icon">⌄</span>
                                </a>
                                <div class="submenu">
                                    <div class="submenu-title">Sobre nós:</div>
                                    <a href="sobre-nos.html" class="submenu-item">Sobre a KACEM, SA</a>
                                    
                                    <div class="submenu-divider"></div>
                                    
                                    <div class="submenu-title">Informação legal:</div>
                                    <a href="termos.html" class="submenu-item">Termos e Condições Gerais</a>
                                    <a href="precario.html" class="submenu-item">Preçário</a>
                                    <a href="politica-reclamacoes.html" class="submenu-item">Política de Reclamação</a>
                                    <a href="relatorio-contas.html" class="submenu-item">Relatório e Contas</a>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </header>

            <!-- Conteúdo da Página -->
            <section class="page-header">
                <div class="container">
                    <h1>Solicitar Microcrédito</h1>
                    <p>Preencha o formulário abaixo para solicitar o seu crédito</p>
                </div>
            </section>

            <section class="application-form">
                <div class="container">
                    <div class="form-progress">
                        <div class="progress-bar">
                            <div class="progress-step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-label">Dados Pessoais</div>
                            </div>
                            <div class="progress-step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-label">Informações do Crédito</div>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-label">Documentação</div>
                            </div>
                            <div class="progress-step" data-step="4">
                                <div class="step-number">4</div>
                                <div class="step-label">Confirmação</div>
                            </div>
                        </div>
                    </div>

                    <form id="credit-application-form">
                        <!-- Step 1: Dados Pessoais -->
                        <div class="form-step active" id="step-1">
                            <h2>Dados Pessoais</h2>
                            <p>Informações básicas sobre o solicitante</p>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="nome">Nome Completo *</label>
                                    <input type="text" id="nome" name="nome" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="data-nascimento">Data de Nascimento *</label>
                                    <input type="date" id="data-nascimento" name="data-nascimento" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="bi-numero">Número do BI *</label>
                                    <input type="text" id="bi-numero" name="bi-numero" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="bi-validade">Validade do BI *</label>
                                    <input type="date" id="bi-validade" name="bi-validade" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="telefone">Telefone *</label>
                                    <input type="tel" id="telefone" name="telefone" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="morada">Morada Completa *</label>
                                    <textarea id="morada" name="morada" rows="3" required></textarea>
                                </div>
                            </div>
                            
                            <div class="form-navigation">
                                <button type="button" class="btn next-step">Próximo</button>
                            </div>
                        </div>
                        
                        <!-- Step 2: Informações do Crédito -->
                        <div class="form-step" id="step-2">
                            <h2>Informações do Crédito</h2>
                            <p>Detalhes sobre o financiamento solicitado</p>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="produto">Produto Desejado *</label>
                                    <select id="produto" name="produto" required>
                                        <option value="">Selecione o produto</option>
                                        <option value="individual">KACEM Investimento</option>
                                        <option value="grupal">KACEM Negócio</option>
                                        <option value="empresarial">KACEM Protocolo</option>
                                        <option value="empresarial">KACEM Solidário</option>
                                        <option value="empresarial">KACEM Tesouraria</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="montante">Montante Solicitado (Kz) *</label>
                                    <input type="number" id="montante" name="montante" min="50000" step="5000" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="prazo">Prazo de Pagamento (meses) *</label>
                                    <select id="prazo" name="prazo" required>
                                        <option value="">Selecione o prazo</option>
                                        <option value="1">1 mês</option>
                                        <option value="2">2 meses</option>
                                        <option value="3">3 meses</option>
                                        <option value="4">4 meses</option>
                                        <option value="5">5 meses</option>
                                        <option value="6">6 meses</option>
                                        <option value="7">7 meses</option>
                                        <option value="8">8 meses</option>
                                        <option value="9">9 meses</option>
                                        <option value="10">10 meses</option>
                                        <option value="11">11 meses</option>
                                        <option value="12">12 meses</option>
                                        <option value="13">13 meses</option>
                                        <option value="14">14 meses</option>
                                        <option value="15">15 meses</option>
                                        <option value="16">16 meses</option>
                                        <option value="17">17 meses</option>
                                        <option value="18">18 meses</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="finalidade">Finalidade do Crédito *</label>
                                    <select id="finalidade" name="finalidade" required>
                                        <option value="">Selecione a finalidade</option>
                                        <option value="capital_giro">Capital de Giro</option>
                                        <option value="equipamentos">Aquisição de Equipamentos</option>
                                        <option value="expansao">Expansão do Negócio</option>
                                        <option value="inventario">Aquisição de Inventário</option>
                                        <option value="outra">Outra</option>
                                    </select>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="descricao-negocio">Descrição do Negócio/Atividade *</label>
                                    <textarea id="descricao-negocio" name="descricao-negocio" rows="4" required></textarea>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="utilizacao-credito">Como pretende utilizar o crédito? *</label>
                                    <textarea id="utilizacao-credito" name="utilizacao-credito" rows="4" required></textarea>
                                </div>
                            </div>
                            
                            <div class="form-navigation">
                                <button type="button" class="btn btn-outline prev-step">Anterior</button>
                                <button type="button" class="btn next-step">Próximo</button>
                            </div>
                        </div>
                        
                        <!-- Step 3: Documentação -->
                        <div class="form-step" id="step-3">
                            <h2>Documentação</h2>
                            <p>Lista de documentos necessários para análise do seu pedido</p>
                            
                            <div class="documents-list">
                                <h3>Documentos Obrigatórios</h3>
                                <ul>
                                    <li>Fotocópia do Bilhete de Identidade</li>
                                    <li>Atestado de Residência (menos de 3 meses)</li>
                                    <li>Comprovativo de Actividade (licença, declaração, etc.)</li>
                                </ul>
                                
                                <h3>Documentos Adicionais (conforme aplicável)</h3>
                                <ul>
                                    <li>Últimos recibos de vencimento (se assalariado)</li>
                                    <li>Declaração de IRS ou equivalente</li>
                                    <li>Documentos de propriedade (para garantias)</li>
                                </ul>
                                
                                <div class="upload-section">
                                    <h3>Envio de Documentos</h3>
                                    <p>Pode enviar os documentos digitalizados através do formulário abaixo ou entregar presencialmente nas nossas instalações.</p>
                                    
                                    <div class="form-group">
                                        <label for="documentos">Carregar Documentos (PDF, JPG, PNG)</label>
                                        <input type="file" id="documentos" name="documentos" multiple accept=".pdf,.jpg,.jpeg,.png">
                                        <p class="file-info">Tamanho máximo por ficheiro: 5MB</p>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="observacoes">Observações Adicionais</label>
                                        <textarea id="observacoes" name="observacoes" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-navigation">
                                <button type="button" class="btn btn-outline prev-step">Anterior</button>
                                <button type="button" class="btn next-step">Próximo</button>
                            </div>
                        </div>
                        
                        <!-- Step 4: Confirmação -->
                        <div class="form-step" id="step-4">
                            <h2>Confirmação</h2>
                            <p>Revise as informações antes de submeter a sua solicitação</p>
                            
                            <div class="summary-section">
                                <h3>Resumo da Solicitação</h3>
                                
                                <div class="summary-grid">
                                    <div class="summary-item">
                                        <h4>Dados Pessoais</h4>
                                        <div class="summary-content" id="summary-pessoal"></div>
                                    </div>
                                    
                                    <div class="summary-item">
                                        <h4>Informações do Crédito</h4>
                                        <div class="summary-content" id="summary-credito"></div>
                                    </div>
                                </div>
                                
                                <div class="consent-section">
                                    <div class="form-group">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="termos-condicoes" name="termos-condicoes" required>
                                            <label for="termos-condicoes">Li e aceito os <a href="termos.html" target="_blank">Termos e Condições</a> e a <a href="politicas.html" target="_blank">Política de Privacidade</a> *</label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="comunicacoes" name="comunicacoes">
                                            <label for="comunicacoes">Autorizo o envio de comunicações sobre produtos e serviços da KACEM</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-navigation">
                                <button type="button" class="btn btn-outline prev-step">Anterior</button>
                                <button type="submit" class="btn" id="submit-btn">Submeter Solicitação</button>
                            </div>
                        </div>
                        
                        <!-- Step 5: Confirmação de Envio -->
                        <div class="form-step" id="step-5">
                            <div class="submission-success">
                                <div class="success-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h2>Solicitação Enviada com Sucesso!</h2>
                                <p>Obrigado por solicitar um microcrédito na KACEM. A sua solicitação foi recebida e será analisada pela nossa equipa.</p>
                                <p>Entraremos em contacto consigo dentro de 72 horas úteis.</p>
                                
                                <div class="success-actions">
                                    <a href="index.html" class="btn">Voltar à Página Inicial</a>
                                    <a href="contacto.html" class="btn btn-outline">Falar com Consultor</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>KACEM, SA</h3>
                    <p>Sociedade de Microcrédito autorizada e regulada pelo Banco Nacional de Angola. Registro nº: 321</p>
                </div>
                
                <div class="footer-section">
                    <h3>Contactos</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Centralidade do Sequele, Prédio 28, Bloco 8, Apartamento 102</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+244 943 269 490</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>geral@kacem.co.ao</span>
                        </div>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Produtos</h3>
                    <ul class="footer-links">
                        <li><a href="KACEM_Investimento.html">KACEM Investimento</a></li>
                        <li><a href="KACEM_Negócio.html">KACEM Negócio</a></li>
                        <li><a href="KACEM_Protocolo.html">KACEM Protocolo</a></li>
                        <li><a href="KACEM_Solidário.html">KACEM Solidário</a></li>
                        <li><a href="KACEM_Tesouraria.html">KACEM Tesouraria</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Informação Legal</h3>
                    <ul class="footer-links">
                        <li><a href="termos.html">Termos e Condições Gerais</a></li>
                        <li><a href="precario.html">Preçário</a></li>
                        <li><a href="politica-reclamacoes.html">Política de Reclamação</a></li>
                        <li><a href="relatorio-contas.html">Relatório e Contas</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 KACEM, SA - Sociedade de Microcrédito. Todos os direitos reservados.</p>
                <p>Entidade autorizada e regulada pelo Banco Nacional de Angola.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // JavaScript para o menu mobile
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            const mainNav = document.querySelector('.prin-cab');
            
            menuToggle.addEventListener('click', function() {
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                mainNav.classList.toggle('active');
                document.body.classList.toggle('menu-open');
            });
            
            // Fechar menu ao clicar em um item (apenas mobile)
            const navItems = document.querySelectorAll('.nav-cab');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    if (window.innerWidth < 768) {
                        mainNav.classList.remove('active');
                        menuToggle.setAttribute('aria-expanded', 'false');
                        document.body.classList.remove('menu-open');
                    }
                });
            });

            // Elementos do DOM para o formulário
            const formSteps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');
            const nextButtons = document.querySelectorAll('.next-step');
            const prevButtons = document.querySelectorAll('.prev-step');
            const form = document.getElementById('credit-application-form');
            const progressBar = document.querySelector('.progress-bar');
            
            let currentStep = 0;
        
            // Função para atualizar o progresso
            function updateProgress() {
                // Atualizar a barra de progresso
                const progressPercentage = (currentStep / (formSteps.length - 1)) * 100;
                progressBar.style.setProperty('--progress-width', `${progressPercentage}%`);
                
                // Atualizar os passos
                progressSteps.forEach((step, index) => {
                    if (index < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
                
                // Atualizar o conteúdo do resumo antes de mostrar o passo 4
                if (currentStep === 3) { // Passo 4 (índice 3)
                    updateSummary();
                }
            }
        
            // Função para mostrar o passo atual
            function showStep(stepIndex) {
                formSteps.forEach((step, index) => {
                    step.classList.toggle('active', index === stepIndex);
                });
                currentStep = stepIndex;
                updateProgress();
            }
        
            // Função para atualizar o resumo
            function updateSummary() {
                // Dados pessoais
                const personalData = {
                    nome: document.getElementById('nome').value,
                    dataNascimento: document.getElementById('data-nascimento').value,
                    biNumero: document.getElementById('bi-numero').value,
                    biValidade: document.getElementById('bi-validade').value,
                    telefone: document.getElementById('telefone').value,
                    email: document.getElementById('email').value,
                    morada: document.getElementById('morada').value
                };
                
                // Informações do crédito
                const creditData = {
                    produto: document.getElementById('produto').value,
                    montante: document.getElementById('montante').value,
                    prazo: document.getElementById('prazo').value,
                    finalidade: document.getElementById('finalidade').value,
                    descricaoNegocio: document.getElementById('descricao-negocio').value,
                    utilizacaoCredito: document.getElementById('utilizacao-credito').value
                };
                
                // Atualizar o resumo dos dados pessoais
                const summaryPessoal = document.getElementById('summary-pessoal');
                summaryPessoal.innerHTML = `
                    <p><strong>Nome:</strong> ${personalData.nome}</p>
                    <p><strong>Data de Nascimento:</strong> ${formatDate(personalData.dataNascimento)}</p>
                    <p><strong>BI Nº:</strong> ${personalData.biNumero}</p>
                    <p><strong>Validade do BI:</strong> ${formatDate(personalData.biValidade)}</p>
                    <p><strong>Telefone:</strong> ${personalData.telefone}</p>
                    <p><strong>Email:</strong> ${personalData.email}</p>
                    <p><strong>Morada:</strong> ${personalData.morada}</p>
                `;
                
                // Atualizar o resumo do crédito
                const summaryCredito = document.getElementById('summary-credito');
                const produtoText = getProductText(creditData.produto);
                const finalidadeText = getFinalidadeText(creditData.finalidade);
                
                summaryCredito.innerHTML = `
                    <p><strong>Produto:</strong> ${produtoText}</p>
                    <p><strong>Montante:</strong> ${formatCurrency(creditData.montante)}</p>
                    <p><strong>Prazo:</strong> ${creditData.prazo} meses</p>
                    <p><strong>Finalidade:</strong> ${finalidadeText}</p>
                    <p><strong>Descrição do Negócio:</strong> ${creditData.descricaoNegocio}</p>
                    <p><strong>Utilização do Crédito:</strong> ${creditData.utilizacaoCredito}</p>
                `;
            }
        
            // Funções auxiliares para formatação
            function formatDate(dateString) {
                if (!dateString) return 'Não informado';
                const date = new Date(dateString);
                return date.toLocaleDateString('pt-PT');
            }
            
            function formatCurrency(amount) {
                if (!amount) return 'Não informado';
                return new Intl.NumberFormat('pt-PT', {
                    style: 'currency',
                    currency: 'AOA'
                }).format(amount);
            }
            
            function getProductText(productValue) {
                const products = {
                    'individual': 'Microcrédito Individual',
                    'grupal': 'Microcrédito Grupal',
                    'empresarial': 'Microcrédito Empresarial'
                };
                return products[productValue] || 'Não informado';
            }
            
            function getFinalidadeText(finalidadeValue) {
                const finalidades = {
                    'capital_giro': 'Capital de Giro',
                    'equipamentos': 'Aquisição de Equipamentos',
                    'expansao': 'Expansão do Negócio',
                    'inventario': 'Aquisição de Inventário',
                    'outra': 'Outra'
                };
                return finalidades[finalidadeValue] || 'Não informado';
            }
        
            // Adicionar event listeners para os botões "Próximo"
            nextButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Validar o passo atual antes de avançar
                    if (validateStep(currentStep)) {
                        if (currentStep < formSteps.length - 1) {
                            showStep(currentStep + 1);
                        }
                    }
                });
            });
        
            // Adicionar event listeners para os botões "Anterior"
            prevButtons.forEach(button => {
                button.addEventListener('click', function() {
                    if (currentStep > 0) {
                        showStep(currentStep - 1);
                    }
                });
            });
        
            // Função para validar o passo atual
            function validateStep(stepIndex) {
                const currentFormStep = formSteps[stepIndex];
                const inputs = currentFormStep.querySelectorAll('input[required], select[required], textarea[required]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (!input.value.trim()) {
                        isValid = false;
                        highlightError(input);
                    } else {
                        removeErrorHighlight(input);
                    }
                    
                    // Validações específicas para email
                    if (input.type === 'email' && input.value.trim()) {
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!emailRegex.test(input.value)) {
                            isValid = false;
                            highlightError(input, 'Por favor, insira um email válido');
                        }
                    }
                    
                    // Validações específicas para telefone
                    if (input.id === 'telefone' && input.value.trim()) {
                        const phoneRegex = /^(\+244|00244)?[9][1-9][0-9]{7}$/;
                        const cleanPhone = input.value.replace(/\D/g, '');
                        if (!phoneRegex.test(cleanPhone)) {
                            isValid = false;
                            highlightError(input, 'Por favor, insira um número de telefone angolano válido');
                        }
                    }
                });
                
                return isValid;
            }
        
            // Funções para destacar erros
            function highlightError(input, message = 'Este campo é obrigatório') {
                input.style.borderColor = '#d85151';
                
                // Remover mensagem de erro existente
                removeErrorHighlight(input);
                
                // Adicionar mensagem de erro
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.style.color = '#d85151';
                errorDiv.style.fontSize = '0.8rem';
                errorDiv.style.marginTop = '5px';
                errorDiv.textContent = message;
                
                input.parentNode.appendChild(errorDiv);
            }
            
            function removeErrorHighlight(input) {
                input.style.borderColor = '#ddd';
                
                const existingError = input.parentNode.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }
            }
        
            // Adicionar event listener para o envio do formulário
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validar o último passo
                if (validateStep(currentStep)) {
                    // Simular envio do formulário
                    showStep(4); // Mostrar tela de sucesso
                    
                    // Aqui você normalmente faria uma requisição AJAX para enviar os dados
                    console.log('Formulário enviado com sucesso!');
                }
            });
        
            // Inicializar a barra de progresso
            progressBar.style.setProperty('--progress-width', '0%');
            
            // Inicializar o primeiro passo
            showStep(0);
        });
    </script>
</body>
</html>